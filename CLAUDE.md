# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Development Commands

```bash
# Start development server
npm run dev

# Build for production
npm run build

# Lint code
npm run lint

# Preview production build
npm run preview

# Regenerate API client from swagger
npm run generate:api

# Update swagger.json only
npm run update:swagger

# Generate API client from existing swagger.json
npm run orval
```

## Architecture Overview

This is a React + TypeScript + Vite application for an employee testing/certification platform with multi-language support (Uzbek, Uzbek Cyrillic, Russian).

### Tech Stack
- **React 19** with TypeScript
- **Vite** for build tooling
- **Tailwind CSS** with @tailwindcss/forms and @tailwindcss/typography plugins
- **TanStack React Query** for server state management
- **Zustand** for client state (auth store with persistence)
- **React Router v7** for routing
- **Orval** for generating API client from OpenAPI/Swagger spec

### Directory Structure

```
src/
├── api/
│   ├── config.ts           # BASE_URL from VITE_PUBLIC_API_URL env var
│   ├── generated/          # Auto-generated API hooks (DO NOT EDIT)
│   │   └── models/         # Generated TypeScript types
│   └── mutator/
│       └── custom-instance.ts  # Axios instance with JWT refresh logic
├── components/
│   ├── auth/               # Login, Register, OTP, Profile completion forms
│   └── test/               # Test-taking components (timer, questions, progress)
├── hooks/                  # Custom React hooks
├── layouts/                # AuthLayout, CertificateLayout, MainLayout
├── pages/                  # Route page components
├── stores/
│   └── authStore.ts        # Zustand store for user auth state
└── i18n.tsx               # Translations dictionary and I18nProvider context
```

### Key Patterns

**API Client Generation**: The API client is auto-generated by Orval from `swagger.json`. Run `npm run generate:api` after backend API changes. Generated files in `src/api/generated/` should not be manually edited.

**Authentication Flow**: JWT tokens stored in localStorage (`accessToken`, `refreshToken`). The axios custom instance (`src/api/mutator/custom-instance.ts`) handles automatic token refresh on 401 responses.

**i18n**: Translations are defined inline in `src/i18n.tsx` as a dictionary object. Use the `useI18n` hook to access the `t()` translation function. Supported languages: `uz` (Uzbek Latin), `uz-cyrl` (Uzbek Cyrillic), `ru` (Russian).

**Routing**: Routes defined in `src/main.tsx`. Protected routes use the `ProtectedRoute` component. Three layout types: main app, auth pages, and certificate pages.

**State Management**:
- Server state: TanStack Query (via Orval-generated hooks)
- Client state: Zustand (`useAuthStore` for user data)

### Environment Variables

- `VITE_PUBLIC_API_URL` - Backend API base URL (defaults to development server)
